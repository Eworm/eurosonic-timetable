Date.prototype.addHours=function(e){this.setHours(this.getHours()+e);return this};$(document).ready(function(){function i(e,t){$(t).toggleClass("active");$(e).toggleClass("active")}function s(e){var i=9,s="";switch(e){case 9:break;case 10:i=10;break;case 11:i=11;break;default:(new Date).getTime()>(new Date("2013-01-09T14:45:00Z")).getTime()&&(new Date).getTime()<(new Date("2013-01-12T09:00:00Z")).getTime()&&(i=(new Date).getDate())}$("#menu").find("li").removeClass("current");$("#menu").find("#menu-"+i).addClass("current");i<10&&(s="0");t=(new Date("2013-01-"+s+i+"T14:45:00Z")).getTime()/6e4;$("#venue-holder").empty();$.getJSON("timetable-json.php?day="+(i+8),function(e){o(e)});if(r>t){$("body").scrollLeft(Math.round((r-t)*n-20));$("#timetable").append('<div id="current-time" style="left:'+Math.round((r-t)*n)+'px"></div>')}}function o(e){for(var t=0;t<e.length;t++){e=window[e]||e;var n=e[t],r=e[t].locations;u(r)}}function u(e){for(var t=0;t<e.length;t++){e=window[e]||e;var n=e[t],r=e[t].heading.head,i=e[t].heading.sub,s=n.events,o=$("<div/>").addClass("venue").append('<div class="venue-bg" style="background-image: url(http://woutmager.nl/esns/200x2:1/fff/cccccc&text='+encodeURIComponent(r+" "+i)+')"></div>').appendTo($("#venue-holder"));a(s,o)}}function a(e,r){for(var i=0;i<e.length;i++){e=window[e]||e;var s=(new Date(e[i].start)).getTime()/6e4,o=(new Date(e[i].end)).getTime()/6e4;$("<a/>").addClass("single-event").append("<span><strong>"+e[i].description+"</strong><br>"+e[i].start_time+" - "+e[i].end_time+"</span>").attr("href",e[i].link).data("eventdata",e[i]).css({left:(s-t)*n,width:(o-s)*n}).appendTo(r)}}var e=40,t=(new Date("2013-01-09T14:45:00Z")).getTime()/6e4,n=e/15,r=(new Date).addHours(1).getTime()/6e4;$("#menu").find("li").click(function(e){i("#menu",$(this));s(parseInt($(this).attr("id").replace("menu-","")));e.preventDefault()});s()});